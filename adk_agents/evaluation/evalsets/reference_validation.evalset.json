{
  "eval_set_id": "reference_validation_suite",
  "name": "Reference Validation Tests",
  "description": "Flexible validation tests that check if agent can find insights similar to manual prototype",
  "eval_cases": [
    {
      "eval_id": "find_capacity_opportunities",
      "conversation": [
        {
          "invocation_id": "rv-001",
          "user_content": {
            "parts": [
              {
                "text": "Find equipment with significant capacity improvement opportunities"
              }
            ],
            "role": "user"
          },
          "final_response": {
            "parts": [
              {
                "text": "Found LINE2-PCK with 72.72% OEE, representing a 12.28% capacity improvement opportunity worth $200K-$400K annually"
              }
            ],
            "role": "model"
          },
          "intermediate_data": {
            "tool_uses": [
              {
                "name": "execute_sparql_query",
                "args": {
                  "query": "SELECT ?equipment (AVG(?oee) AS ?avg_oee) WHERE { ?equipment mes_ontology_populated:logsEvent ?event . ?event mes_ontology_populated:hasOEEScore ?oee } GROUP BY ?equipment"
                }
              },
              {
                "name": "calculate_improvement_roi",
                "args": {
                  "current_performance": 72.72,
                  "target_performance": 85.0
                }
              }
            ],
            "intermediate_responses": []
          }
        }
      ],
      "session_input": {
        "app_name": "manufacturing_analyst",
        "user_id": "eval_user",
        "state": {}
      }
    },
    {
      "eval_id": "find_temporal_patterns",
      "conversation": [
        {
          "invocation_id": "rv-002",
          "user_content": {
            "parts": [
              {
                "text": "Analyze downtime patterns and find any clustering or shift-based trends"
              }
            ],
            "role": "user"
          },
          "final_response": {
            "parts": [
              {
                "text": "Analysis shows 60% of downtime events cluster within 10-minute windows, and night shift experiences 40% more micro-stops than day shift. This clustering pattern suggests preventive maintenance opportunities worth $250K-$350K annually."
              }
            ],
            "role": "model"
          },
          "intermediate_data": {
            "tool_uses": [
              {
                "name": "execute_sparql_query",
                "args": {
                  "query": "SELECT ?equipment ?timestamp ?reason WHERE { ?equipment mes_ontology_populated:logsEvent ?event . ?event a mes_ontology_populated:DowntimeLog }"
                }
              },
              {
                "name": "analyze_patterns",
                "args": {
                  "analysis_type": "temporal_clustering"
                }
              }
            ],
            "intermediate_responses": []
          }
        }
      ],
      "session_input": {
        "app_name": "manufacturing_analyst",
        "user_id": "eval_user",
        "state": {}
      }
    },
    {
      "eval_id": "find_quality_opportunities",
      "conversation": [
        {
          "invocation_id": "rv-003",
          "user_content": {
            "parts": [
              {
                "text": "Where can we reduce scrap costs and improve quality?"
              }
            ],
            "role": "user"
          },
          "final_response": {
            "parts": [
              {
                "text": "Current average quality is 95.3% compared to 98% target. This 2.7% gap represents $200K in annual scrap costs. A phased improvement approach focusing on top defect reasons could achieve 98% quality with $40K investment and 2.4-month payback."
              }
            ],
            "role": "model"
          },
          "intermediate_data": {
            "tool_uses": [
              {
                "name": "execute_sparql_query",
                "args": {
                  "query": "SELECT ?product (AVG(?quality) AS ?avg_quality) WHERE { ?event mes_ontology_populated:hasQualityScore ?quality } GROUP BY ?product"
                }
              },
              {
                "name": "calculate_improvement_roi",
                "args": {
                  "current_performance": 95.3,
                  "target_performance": 98.0,
                  "annual_volume": 10000000,
                  "unit_value": 2.74
                }
              }
            ],
            "intermediate_responses": []
          }
        }
      ],
      "session_input": {
        "app_name": "manufacturing_analyst",
        "user_id": "eval_user",
        "state": {}
      }
    }
  ]
}