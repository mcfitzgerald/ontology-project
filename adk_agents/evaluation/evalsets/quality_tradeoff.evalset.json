{
  "eval_set_id": "quality_cost_tradeoff",
  "name": "Quality-Cost Trade-off Analysis Test",
  "description": "Tests agent's ability to analyze quality vs cost trade-offs and identify $200K/year improvement opportunity",
  "eval_cases": [
    {
      "eval_id": "analyze_quality_gaps",
      "conversation": [
        {
          "invocation_id": "qt-001",
          "user_content": {
            "parts": [
              {
                "text": "Where's the sweet spot between quality and cost in our production?"
              }
            ],
            "role": "user"
          },
          "final_response": {
            "parts": [
              {
                "text": "I'll analyze the quality-cost trade-offs across your products to find the optimal balance. Let me examine quality scores, scrap rates, and product margins."
              }
            ],
            "role": "model"
          },
          "intermediate_data": {
            "tool_uses": [
              {
                "name": "execute_sparql_query",
                "args": {
                  "query": "SELECT DISTINCT ?product ?productName ?targetRate ?salePrice ?standardCost WHERE { ?product a mes_ontology_populated:Product . ?product mes_ontology_populated:hasProductName ?productName . ?product mes_ontology_populated:hasTargetRate ?targetRate . ?product mes_ontology_populated:hasSalePrice ?salePrice . ?product mes_ontology_populated:hasStandardCost ?standardCost . } ORDER BY ?product"
                }
              },
              {
                "name": "execute_sparql_query",
                "args": {
                  "query": "SELECT ?product (AVG(?qualityScore) AS ?avgQuality) (MIN(?qualityScore) AS ?minQuality) WHERE { ?equipment mes_ontology_populated:executesOrder ?order . ?order mes_ontology_populated:producesProduct ?product . ?equipment mes_ontology_populated:logsEvent ?event . ?event a mes_ontology_populated:ProductionLog . ?event mes_ontology_populated:hasQualityScore ?qualityScore . FILTER(?qualityScore < 98.0) FILTER(ISIRI(?product)) } GROUP BY ?product ORDER BY ?avgQuality"
                }
              },
              {
                "name": "analyze_patterns",
                "args": {
                  "data": "Product quality scores and margins",
                  "analysis_type": "quality_cost_analysis"
                }
              }
            ],
            "intermediate_responses": []
          }
        },
        {
          "invocation_id": "qt-002",
          "user_content": {
            "parts": [
              {
                "text": "What's the financial impact of improving quality?"
              }
            ],
            "role": "user"
          },
          "final_response": {
            "parts": [
              {
                "text": "Based on my analysis, improving quality from the current ~95% average to industry best practice (98% = 1% scrap) would save $200K annually:\n\n**Key Findings:**\n- All products average 95.3% quality (3% scrap vs 1% target)\n- Premium Juice (SKU-1002): Highest impact at $46K/year savings potential\n- Energy Drink (SKU-2002): $53K/year opportunity\n\n**Investment Options:**\n1. Enhanced Inspection: $50K investment, 3-4 month payback\n2. Vision System: $150K investment, 8-10 month payback\n3. Full Retrofit: $500K investment, 18-24 month payback\n\n**Recommendation:** Start with enhanced inspection on high-margin products for quick ROI."
              }
            ],
            "role": "model"
          },
          "intermediate_data": {
            "tool_uses": [
              {
                "name": "calculate_improvement_roi",
                "args": {
                  "current_performance": 95.3,
                  "target_performance": 98.0,
                  "production_value_per_day": 548,
                  "improvement_type": "quality_improvement",
                  "investment_cost": 50000,
                  "description": "Enhanced inspection system"
                }
              }
            ],
            "intermediate_responses": []
          }
        }
      ],
      "session_input": {
        "app_name": "manufacturing_analyst",
        "user_id": "eval_user",
        "state": {}
      }
    },
    {
      "eval_id": "product_specific_quality",
      "conversation": [
        {
          "invocation_id": "qt-003",
          "user_content": {
            "parts": [
              {
                "text": "Which products have the worst quality issues?"
              }
            ],
            "role": "user"
          },
          "final_response": {
            "parts": [
              {
                "text": "Let me analyze quality performance by product to identify which ones have the most significant issues."
              }
            ],
            "role": "model"
          },
          "intermediate_data": {
            "tool_uses": [
              {
                "name": "execute_sparql_query",
                "args": {
                  "query": "SELECT ?product ?equipment ?oee ?performance ?timestamp WHERE { ?equipment mes_ontology_populated:executesOrder ?order . ?order mes_ontology_populated:producesProduct ?product . ?equipment mes_ontology_populated:logsEvent ?event . ?event mes_ontology_populated:hasOEEScore ?oee . ?event mes_ontology_populated:hasPerformanceScore ?performance . ?event mes_ontology_populated:hasTimestamp ?timestamp . ?event a mes_ontology_populated:ProductionLog . FILTER(?product = mes_ontology_populated:SKU-2002) FILTER(?performance < 85.0) FILTER(ISIRI(?equipment)) } ORDER BY ?performance LIMIT 50"
                }
              },
              {
                "name": "analyze_patterns",
                "args": {
                  "data": "Product performance data",
                  "analysis_type": "product_impact"
                }
              },
              {
                "name": "create_visualization",
                "args": {
                  "data": "Quality scores by product",
                  "chart_type": "bar",
                  "title": "Average Quality Score by Product",
                  "x_label": "Product",
                  "y_label": "Quality Score %"
                }
              }
            ],
            "intermediate_responses": []
          }
        }
      ],
      "session_input": {
        "app_name": "manufacturing_analyst",
        "user_id": "eval_user",
        "state": {}
      }
    }
  ]
}