# MES Ontology Mind Map for LLM SPARQL Query Generation
# Generated: 2025-07-17T10:31:28.187536
# Purpose: Provide ontology structure with business context for accurate SPARQL query construction

# This file contains:
# 1. Complete class hierarchy with business meanings
# 2. All properties with domains, ranges, and operational context  
# 3. Key individuals as real-world examples

# CRITICAL PREFIX INFORMATION FOR SPARQL QUERIES:
# ============================================
# Owlready2 IGNORES all PREFIX declarations and creates its own prefix from the OWL filename.
# 
# PREFIX MAPPING:
#   - Turtle format (this file): :hasOEEScore (default namespace)
#   - OWL filename: mes_ontology_populated.owl
#   - Owlready2 auto-prefix: mes_ontology_populated:hasOEEScore
#   - SPARQL queries MUST use: mes_ontology_populated:hasOEEScore
#
# IMPORTANT: The ':' prefix (default namespace) shown in this file maps to 'mes_ontology_populated:' in SPARQL!
# You MUST use 'mes_ontology_populated:' as the prefix in all SPARQL queries.
#
# Example SPARQL query:
#   SELECT ?equipment ?oee WHERE {
#     ?equipment mes_ontology_populated:logsEvent ?event .
#     ?event a mes_ontology_populated:ProductionLog .
#     ?event mes_ontology_populated:hasOEEScore ?oee .
#     FILTER(?oee < 85.0)
#   }

#############################################################################
# NAMESPACE INFORMATION
#############################################################################

# Base IRI: http://mes-ontology.org/factory.owl#
# Ontology filename: mes_ontology_populated.owl
# Automatic Owlready2 prefix: mes_ontology_populated

# Standard prefixes (automatically available):
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

# Default namespace (no prefix needed):
@prefix : <http://mes-ontology.org/factory.owl#> .

# Business context annotation property
:businessContext a owl:AnnotationProperty ;
    rdfs:label "Business Context" ;
    rdfs:comment "Explains the business meaning and operational significance" .

:typicalValue a owl:AnnotationProperty ;
    rdfs:label "Typical Value" ;
    rdfs:comment "Common or expected values in production" .

:calculationMethod a owl:AnnotationProperty ;
    rdfs:label "Calculation Method" ;
    rdfs:comment "How this metric is calculated" .

:mapsToColumn a owl:AnnotationProperty ;
    rdfs:label "Maps to Column" ;
    rdfs:comment "The CSV column name this property maps to" .

:dataContext a owl:AnnotationProperty ;
    rdfs:label "Data Context" ;
    rdfs:comment "Describes the type and meaning of the data" .

:exampleValue a owl:AnnotationProperty ;
    rdfs:label "Example Value" ;
    rdfs:comment "Example value from the dataset" .

#############################################################################
# CLASSES - Core business entities
#############################################################################

:Changeover a owl:Class ;
    rdfs:subClassOf :PlannedDowntime ;
    rdfs:label "Changeover" .

:Cleaning a owl:Class ;
    rdfs:subClassOf :PlannedDowntime ;
    rdfs:label "Cleaning" .

:DowntimeLog a owl:Class ;
    rdfs:subClassOf :Event ;
    rdfs:label "DowntimeLog" .

:DowntimeReason a owl:Class ;
    rdfs:subClassOf :Reason ;
    rdfs:label "DowntimeReason" .

:Equipment a owl:Class ;
    rdfs:subClassOf :Resource ;
    rdfs:label "Equipment" .

:Event a owl:Class ;
    rdfs:label "Event" .

:Filler a owl:Class ;
    rdfs:subClassOf :Equipment ;
    rdfs:label "Filler" .

:MaterialJam a owl:Class ;
    rdfs:subClassOf :UnplannedDowntime ;
    rdfs:label "MaterialJam" .

:MaterialStarvation a owl:Class ;
    rdfs:subClassOf :UnplannedDowntime ;
    rdfs:label "MaterialStarvation" .

:MechanicalFailure a owl:Class ;
    rdfs:subClassOf :UnplannedDowntime ;
    rdfs:label "MechanicalFailure" .

:Packer a owl:Class ;
    rdfs:subClassOf :Equipment ;
    rdfs:label "Packer" .

:Palletizer a owl:Class ;
    rdfs:subClassOf :Equipment ;
    rdfs:label "Palletizer" .

:PlannedDowntime a owl:Class ;
    rdfs:subClassOf :DowntimeReason ;
    rdfs:label "PlannedDowntime" .

:Process a owl:Class ;
    rdfs:label "Process" .

:Product a owl:Class ;
    rdfs:subClassOf :Resource ;
    rdfs:label "Product" .

:ProductionLine a owl:Class ;
    rdfs:subClassOf :Resource ;
    rdfs:label "ProductionLine" .

:ProductionLog a owl:Class ;
    rdfs:subClassOf :Event ;
    rdfs:label "ProductionLog" .

:ProductionOrder a owl:Class ;
    rdfs:subClassOf :Process ;
    rdfs:label "ProductionOrder" .

:Reason a owl:Class ;
    rdfs:label "Reason" .

:Resource a owl:Class ;
    rdfs:label "Resource" .

:UnplannedDowntime a owl:Class ;
    rdfs:subClassOf :DowntimeReason ;
    rdfs:label "UnplannedDowntime" .


#############################################################################
# OBJECT PROPERTIES - Relationships between entities
#############################################################################

:belongsToLine a owl:ObjectProperty ;
    rdfs:domain :Equipment ;
    rdfs:range :ProductionLine ;
    rdfs:label "belongsToLine" .

:executesOrder a owl:ObjectProperty ;
    rdfs:domain :Equipment ;
    rdfs:range :ProductionOrder ;
    rdfs:label "executesOrder" .

:hasDowntimeReason a owl:ObjectProperty ;
    rdfs:domain :DowntimeLog ;
    rdfs:range :DowntimeReason ;
    rdfs:label "hasDowntimeReason" .

:hasEquipment a owl:ObjectProperty ;
    rdfs:domain :ProductionLine ;
    rdfs:range :Equipment ;
    rdfs:label "hasEquipment" .

:isDownstreamOf a owl:ObjectProperty ;
    rdfs:domain :Equipment ;
    rdfs:range :Equipment ;
    rdfs:label "isDownstreamOf" .

:isUpstreamOf a owl:ObjectProperty ;
    rdfs:domain :Equipment ;
    rdfs:range :Equipment ;
    rdfs:label "isUpstreamOf" .

:logsEvent a owl:ObjectProperty ;
    rdfs:domain :Equipment ;
    rdfs:range :Event ;
    rdfs:label "logsEvent" .

:producesProduct a owl:ObjectProperty ;
    rdfs:domain :ProductionOrder ;
    rdfs:range :Product ;
    rdfs:label "producesProduct" .


#############################################################################
# DATA PROPERTIES - Metrics and attributes
#############################################################################

:hasAvailabilityScore a owl:DatatypeProperty ;
    rdfs:domain :Event ;
    rdfs:range xsd:float ;
    rdfs:label "hasAvailabilityScore" ;
    :mapsToColumn "Availability_Score" ;
    :dataContext "Equipment availability percentage (0-100)" ;
    :typicalValue "85-95% for world-class operations" .

:hasDowntimeReasonCode a owl:DatatypeProperty ;
    rdfs:domain :DowntimeLog ;
    rdfs:range xsd:string ;
    rdfs:label "hasDowntimeReasonCode" ;
    :mapsToColumn "DowntimeReason" ;
    :dataContext "Reason code for equipment stoppage" .

:hasEquipmentID a owl:DatatypeProperty ;
    rdfs:domain :Equipment ;
    rdfs:range xsd:string ;
    rdfs:label "hasEquipmentID" ;
    :mapsToColumn "EquipmentID" ;
    :dataContext "Unique equipment identifier (e.g., LINE1-FIL)" ;
    :exampleValue "LINE1-FIL" .

:hasEquipmentType a owl:DatatypeProperty ;
    rdfs:domain :Equipment ;
    rdfs:range xsd:string ;
    rdfs:label "hasEquipmentType" ;
    :mapsToColumn "EquipmentType" ;
    :dataContext "Type of equipment (Filler, Packer, Palletizer)" .

:hasGoodUnits a owl:DatatypeProperty ;
    rdfs:domain :ProductionLog ;
    rdfs:range xsd:integer ;
    rdfs:label "hasGoodUnits" ;
    :mapsToColumn "GoodUnitsProduced" ;
    :dataContext "Count of sellable units produced in 5-min interval" .

:hasLineID a owl:DatatypeProperty ;
    rdfs:domain :ProductionLine ;
    rdfs:range xsd:integer ;
    rdfs:label "hasLineID" ;
    :mapsToColumn "LineID" ;
    :dataContext "Production line identifier (1-3)" .

:hasMachineStatus a owl:DatatypeProperty ;
    rdfs:domain :Event ;
    rdfs:range xsd:string ;
    rdfs:label "hasMachineStatus" ;
    :mapsToColumn "MachineStatus" ;
    :dataContext "Current equipment state (Running/Stopped)" .

:hasOEEScore a owl:DatatypeProperty ;
    rdfs:domain :Event ;
    rdfs:range xsd:float ;
    rdfs:label "hasOEEScore" ;
    :mapsToColumn "OEE_Score" ;
    :dataContext "Overall Equipment Effectiveness (0-100)" ;
    :typicalValue "85-95% for world-class operations" ;
    :calculationMethod "Availability × Performance × Quality" .

:hasOrderID a owl:DatatypeProperty ;
    rdfs:domain :ProductionOrder ;
    rdfs:range xsd:string ;
    rdfs:label "hasOrderID" ;
    :mapsToColumn "ProductionOrderID" ;
    :dataContext "Unique identifier for production order" .

:hasPerformanceScore a owl:DatatypeProperty ;
    rdfs:domain :Event ;
    rdfs:range xsd:float ;
    rdfs:label "hasPerformanceScore" ;
    :mapsToColumn "Performance_Score" ;
    :dataContext "Production speed efficiency (0-100)" ;
    :typicalValue "85-95% for world-class operations" .

:hasProductID a owl:DatatypeProperty ;
    rdfs:domain :Product ;
    rdfs:range xsd:string ;
    rdfs:label "hasProductID" ;
    :mapsToColumn "ProductID" ;
    :dataContext "Product SKU identifier" ;
    :exampleValue "SKU-1001" .

:hasProductName a owl:DatatypeProperty ;
    rdfs:domain :Product ;
    rdfs:range xsd:string ;
    rdfs:label "hasProductName" ;
    :mapsToColumn "ProductName" ;
    :dataContext "Human-readable product name" .

:hasQualityScore a owl:DatatypeProperty ;
    rdfs:domain :Event ;
    rdfs:range xsd:float ;
    rdfs:label "hasQualityScore" ;
    :mapsToColumn "Quality_Score" ;
    :dataContext "Product quality percentage (0-100)" ;
    :typicalValue "85-95% for world-class operations" .

:hasSalePrice a owl:DatatypeProperty ;
    rdfs:domain :Product ;
    rdfs:range xsd:float ;
    rdfs:label "hasSalePrice" ;
    :mapsToColumn "SalePrice_per_unit" ;
    :dataContext "Selling price per unit" .

:hasScrapUnits a owl:DatatypeProperty ;
    rdfs:domain :ProductionLog ;
    rdfs:range xsd:integer ;
    rdfs:label "hasScrapUnits" ;
    :mapsToColumn "ScrapUnitsProduced" ;
    :dataContext "Count of defective units in 5-min interval" .

:hasStandardCost a owl:DatatypeProperty ;
    rdfs:domain :Product ;
    rdfs:range xsd:float ;
    rdfs:label "hasStandardCost" ;
    :mapsToColumn "StandardCost_per_unit" ;
    :dataContext "Manufacturing cost per unit" .

:hasTargetRate a owl:DatatypeProperty ;
    rdfs:domain :Product ;
    rdfs:range xsd:float ;
    rdfs:label "hasTargetRate" ;
    :mapsToColumn "TargetRate_units_per_5min" ;
    :dataContext "Expected production rate per 5-minute interval" .

:hasTimestamp a owl:DatatypeProperty ;
    rdfs:domain :Event ;
    rdfs:range xsd:string ;
    rdfs:label "hasTimestamp" ;
    :mapsToColumn "Timestamp" ;
    :dataContext "5-minute interval timestamp for production events" ;
    :exampleValue "2025-06-01 00:00:00" .


#############################################################################
# EXAMPLE INDIVIDUALS - Real instances from the factory
#############################################################################

:LINE1-FIL a :Filler ;
    rdfs:label "LINE1-FIL" ;
    :isUpstreamOf :LINE1-PCK ;
    :executesOrder :ORD-1000 ;
    :executesOrder :ORD-1001 ;
    :executesOrder :ORD-1002 ;
    :logsEvent :EVENT-LINE1-FIL-2025-06-01T00-00-00 ;
    :logsEvent :EVENT-LINE1-FIL-2025-06-01T00-05-00 ;
    :logsEvent :EVENT-LINE1-FIL-2025-06-01T00-10-00 ;
    :belongsToLine :LINE1 .

:LINE1-PCK a :Packer ;
    rdfs:label "LINE1-PCK" ;
    :isUpstreamOf :LINE1-PAL ;
    :executesOrder :ORD-1000 ;
    :executesOrder :ORD-1001 ;
    :executesOrder :ORD-1002 ;
    :logsEvent :EVENT-LINE1-PCK-2025-06-01T00-00-00 ;
    :logsEvent :EVENT-LINE1-PCK-2025-06-01T00-05-00 ;
    :logsEvent :EVENT-LINE1-PCK-2025-06-01T00-10-00 ;
    :belongsToLine :LINE1 ;
    :isDownstreamOf :LINE1-FIL .

:LINE2-PCK a :Packer ;
    rdfs:label "LINE2-PCK" ;
    :isUpstreamOf :LINE2-PAL ;
    :executesOrder :ORD-1026 ;
    :executesOrder :ORD-1027 ;
    :executesOrder :ORD-1028 ;
    :logsEvent :EVENT-LINE2-PCK-2025-06-01T00-00-00 ;
    :logsEvent :EVENT-LINE2-PCK-2025-06-01T00-05-00 ;
    :logsEvent :EVENT-LINE2-PCK-2025-06-01T00-10-00 ;
    :belongsToLine :LINE2 ;
    :isDownstreamOf :LINE2-FIL .

:LINE3-FIL a :Filler ;
    rdfs:label "LINE3-FIL" ;
    :isUpstreamOf :LINE3-PCK ;
    :executesOrder :ORD-1054 ;
    :executesOrder :ORD-1055 ;
    :executesOrder :ORD-1056 ;
    :logsEvent :EVENT-LINE3-FIL-2025-06-01T00-00-00 ;
    :logsEvent :EVENT-LINE3-FIL-2025-06-01T00-05-00 ;
    :logsEvent :EVENT-LINE3-FIL-2025-06-01T00-10-00 ;
    :belongsToLine :LINE3 .

:SKU-1001 a :Product ;
    rdfs:label "12oz Sparkling Water" ;
    :targetRate 500 ;
    :standardCost 0.15 ;
    :salePrice 0.5 ;
    :profitMargin "70.0%" .

:SKU-1002 a :Product ;
    rdfs:label "32oz Premium Juice" ;
    :targetRate 350 ;
    :standardCost 0.45 ;
    :salePrice 1.5 ;
    :profitMargin "70.0%" .

:SKU-2001 a :Product ;
    rdfs:label "12oz Soda" ;
    :targetRate 475 ;
    :standardCost 0.2 ;
    :salePrice 0.65 ;
    :profitMargin "69.2%" .

:SKU-2002 a :Product ;
    rdfs:label "16oz Energy Drink" ;
    :targetRate 450 ;
    :standardCost 0.55 ;
    :salePrice 1.75 ;
    :profitMargin "68.6%" .

:SKU-3001 a :Product ;
    rdfs:label "8oz Kids Drink" ;
    :targetRate 550 ;
    :standardCost 0.25 ;
    :salePrice 0.75 ;
    :profitMargin "66.7%" .


#############################################################################
# EXAMPLE SPARQL QUERIES - Using correct prefix for Owlready2
#############################################################################

# REMEMBER: Use 'mes_ontology_populated:' NOT 'mes:' in your SPARQL queries!

# 1. Find underperforming equipment (OEE < 85%)
# SELECT ?equipment ?oee WHERE {
#     ?equipment mes_ontology_populated:logsEvent ?event .
#     ?event a mes_ontology_populated:ProductionLog .
#     ?event mes_ontology_populated:hasOEEScore ?oee .
#     FILTER(?oee < 85.0)
# } LIMIT 10

# 2. Get equipment downtime events
# SELECT ?equipment ?timestamp ?reason WHERE {
#     ?equipment mes_ontology_populated:logsEvent ?event .
#     ?event a mes_ontology_populated:DowntimeLog .
#     ?event mes_ontology_populated:hasTimestamp ?timestamp .
#     OPTIONAL { ?event mes_ontology_populated:hasDowntimeReasonCode ?reason }
# } ORDER BY DESC(?timestamp)

# 3. Find production quality issues
# SELECT ?equipment ?product ?qualityScore WHERE {
#     ?equipment mes_ontology_populated:logsEvent ?event .
#     ?event a mes_ontology_populated:ProductionLog .
#     ?order mes_ontology_populated:producesProduct ?product .
#     ?equipment mes_ontology_populated:executesOrder ?order .
#     ?event mes_ontology_populated:hasQualityScore ?qualityScore .
#     FILTER(?qualityScore < 98.0)
# }

# 4. Calculate average OEE by equipment
# SELECT ?equipment ?equipmentID (AVG(?oee) AS ?avgOEE) WHERE {
#     ?equipment mes_ontology_populated:logsEvent ?event .
#     ?event a mes_ontology_populated:ProductionLog .
#     ?equipment mes_ontology_populated:hasEquipmentID ?equipmentID .
#     ?event mes_ontology_populated:hasOEEScore ?oee .
# } GROUP BY ?equipment ?equipmentID

